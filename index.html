<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>French Vocabulary Quiz</title>
    <style>
        :root {
            --primary: #0055A4; /* French Blue */
            --primary-dark: #003d7a;
            --surface: #ffffff;
            --background: #f5f5f5;
            --error: #EF4135; /* French Red */
            --success: #00c853;
            --text-primary: #000000;
            --text-secondary: #666666;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: var(--surface);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }

        h1 {
            margin-top: 0;
            color: var(--primary);
        }

        .input-group {
            margin-bottom: 1rem;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        input[type="number"], input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
            outline: none;
            transition: border-color 0.2s;
        }

        input:focus {
            border-color: var(--primary);
        }

        /* Buttons */
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: background-color 0.2s, transform 0.1s;
            margin-bottom: 1rem;
            touch-action: manipulation; /* Improves touch response */
        }

        .btn:hover {
            background-color: var(--primary-dark);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            margin-top: 1rem;
            margin-bottom: 0;
            font-size: 0.9rem;
        }

        .btn-outline:hover {
            background-color: #e3f2fd;
        }

        .hidden {
            display: none;
        }

        /* Quiz Specific Styles */
        .lang-indicator {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .word-display {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #333;
        }

        .feedback-stats {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            min-height: 1.2em;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .input-correct {
            border-color: var(--success) !important;
            background-color: #e8f5e9;
            color: #00600f;
        }

        .input-incorrect {
            border-color: var(--error) !important;
            background-color: #ffebee;
            color: var(--error);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #eee;
            margin-top: 2rem;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .setup-screen {
            animation: fadeIn 0.5s;
        }

        .quiz-screen {
            animation: slideIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>

    <!-- Setup Screen -->
    <div id="setupScreen" class="container setup-screen">
        <h1>French Trainer</h1>
        <p>Master the 100 common words.</p>
        
        <div class="input-group">
            <label for="progressInput">How many words have you learned?</label>
            <input type="number" id="progressInput" min="0" max="100" placeholder="e.g., 10">
        </div>

        <button class="btn" onclick="startQuiz()">Start Quiz</button>
    </div>

    <!-- Quiz Screen -->
    <div id="quizScreen" class="container quiz-screen hidden">
        <div class="lang-indicator" id="langIndicator"></div>
        <div class="word-display" id="questionWord">Bonjour</div>
        
        <div class="input-group">
            <input type="text" id="answerInput" placeholder="Type translation..." autocomplete="off">
        </div>
        
        <button class="btn" onclick="checkAnswer()">Submit</button>

        <div class="feedback-stats" id="statsDisplay"></div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <button class="btn btn-outline" onclick="copyAiPrompt()">
            ðŸ“‹ Copy AI Practice Prompt
        </button>
    </div>

    <script>
        // French Word List (Expanded)
        const frenchWords1500 = [
  // Articles, Pronouns & Core Words
  { "le": "the (masculine)" }, { "la": "the (feminine)" }, { "l'": "the (before vowel)" }, { "les": "the (plural)" },
  { "un": "a, an (masculine)" }, { "une": "a, an (feminine)" }, { "des": "some (plural)" }, { "du": "some (partitive)" },
  { "de": "of, from" }, { "Ã ": "to, at, in" }, { "en": "in, by" }, { "dans": "in" },
  { "sur": "on, about" }, { "pour": "for" }, { "par": "by, through" }, { "avec": "with" },
  { "sans": "without" }, { "sous": "under" }, { "chez": "at the home/place of" },
  { "et": "and" }, { "ou": "or" }, { "mais": "but" }, { "donc": "so, therefore" }, { "car": "because" },
  { "je": "I" }, { "tu": "you (informal)" }, { "il": "he, it" }, { "elle": "she, it" }, { "on": "one, we (informal)" },
  { "nous": "we, us" }, { "vous": "you (formal/plural)" }, { "ils": "they (masculine)" }, { "elles": "they (feminine)" },
  { "me": "me" }, { "te": "you" }, { "se": "oneself" }, { "nous": "us" }, { "vous": "you" },
  { "le": "him, it" }, { "la": "her, it" }, { "les": "them" }, { "lui": "him, to him" }, { "leur": "them, to them" },
  { "y": "there (replaces Ã  + thing)" }, { "en": "some, of it (replaces de + thing)" },
  { "mon": "my (masculine)" }, { "ma": "my (feminine)" }, { "mes": "my (plural)" },
  { "ton": "your (informal, masc.)" }, { "ta": "your (informal, fem.)" }, { "tes": "your (informal, plural)" },
  { "son": "his, her, its (masc.)" }, { "sa": "his, her, its (fem.)" }, { "ses": "his, her, its (plural)" },
  { "notre": "our" }, { "nos": "our (plural)" }, { "votre": "your (formal/plural)" }, { "vos": "your (formal/plural)" },
  { "leur": "their" }, { "leurs": "their (plural)" },
  { "ce": "this, that (masc.)" }, { "cet": "this, that (before vowel)" }, { "cette": "this, that (fem.)" }, { "ces": "these, those" },
  { "ceci": "this" }, { "cela": "that" }, { "Ã§a": "that (informal)" },
  { "qui": "who, which" }, { "que": "that, what, whom" }, { "quoi": "what" }, { "dont": "of which, whose" }, { "oÃ¹": "where" },
  { "lequel": "which one (masc.)" }, { "laquelle": "which one (fem.)" },
  { "aucun": "no, none" }, { "chaque": "each" }, { "certains": "some" }, { "plusieurs": "several" }, { "tout": "all, every" },
  { "mÃªme": "same, even" }, { "autre": "other" }, { "tel": "such" },
  { "quel": "which, what (masc.)" }, { "quelle": "which, what (fem.)" }, { "quels": "which, what (masc. pl.)" }, { "quelles": "which, what (fem. pl.)" },
  { "beaucoup": "a lot, many" }, { "peu": "few, little" }, { "assez": "enough" }, { "trop": "too much" }, { "trÃ¨s": "very" }, { "plus": "more" },
  { "moins": "less" }, { "bien": "well" }, { "mal": "badly" }, { "vite": "quickly" }, { "toujours": "always" }, { "souvent": "often" },
  { "parfois": "sometimes" }, { "rarement": "rarely" }, { "jamais": "never" }, { "dÃ©jÃ ": "already" }, { "encore": "again, still" },
  { "longtemps": "a long time" }, { "maintenant": "now" }, { "alors": "then, so" }, { "aprÃ¨s": "after" }, { "avant": "before" },
  { "ici": "here" }, { "lÃ ": "there" }, { "loin": "far" }, { "prÃ¨s": "near" }, { "partout": "everywhere" },
  { "oui": "yes" }, { "non": "no" }, { "si": "yes (contradiction)" }, { "peut-Ãªtre": "maybe" }, { "certainement": "certainly" },
  // Common Verbs (Present tense, infinitive, past participle)
  { "Ãªtre": "to be" }, { "avoir": "to have" }, { "faire": "to do, to make" }, { "dire": "to say, to tell" },
  { "pouvoir": "to be able to" }, { "vouloir": "to want" }, { "savoir": "to know (a fact)" }, { "voir": "to see" },
  { "devoir": "to have to, must" }, { "venir": "to come" }, { "suivre": "to follow" }, { "parler": "to speak" },
  { "prendre": "to take" }, { "croire": "to believe" }, { "aimer": "to like, to love" }, { "falloir": "to be necessary" },
  { "passer": "to pass, to spend (time)" }, { "penser": "to think" }, { "attendre": "to wait" }, { "trouver": "to find" },
  { "laisser": "to let, to leave" }, { "donner": "to give" }, { "regarder": "to look at, to watch" }, { "appeler": "to call" },
  { "partir": "to leave" }, { "arriver": "to arrive, to happen" }, { "entendre": "to hear" }, { "chercher": "to look for" },
  { "connaÃ®tre": "to know (a person/place)" }, { "vivre": "to live" }, { "comprendre": "to understand" }, { "sortir": "to go out" },
  { "tenir": "to hold" }, { "rester": "to stay" }, { "porter": "to carry, to wear" }, { "montrer": "to show" },
  { "continuer": "to continue" }, { "commencer": "to begin" }, { "compter": "to count, to intend" }, { "revenir": "to come back" },
  { "devenir": "to become" }, { "entrer": "to enter" }, { "mourir": "to die" }, { "naÃ®tre": "to be born" },
  { "rappeler": "to call back, to remind" }, { "occuper": "to occupy" }, { "Ã©crire": "to write" }, { "lire": "to read" },
  { "mettre": "to put, to place" }, { "ouvrir": "to open" }, { "fermer": "to close" }, { "sentir": "to feel, to smell" },
  { "perdre": "to lose" }, { "rendre": "to give back, to make (someone feel)" }, { "retrouver": "to meet up, to find again" },
  { "servir": "to serve" }, { "arrÃªter": "to stop" }, { "essayer": "to try" }, { "changer": "to change" },
  { "travailler": "to work" }, { "jouer": "to play" }, { "gagner": "to win, to earn" }, { "permetre": "to allow" },
  { "prÃ©senter": "to present, to introduce" }, { "accepter": "to accept" }, { "refuser": "to refuse" },
  { "agir": "to act" }, { "atteindre": "to reach" }, { "choisir": "to choose" }, { "dÃ©cider": "to decide" },
  { "dÃ©couvrir": "to discover" }, { "dÃ©fendre": "to defend, to forbid" }, { "dÃ©pendre": "to depend" },
  { "descendre": "to go down" }, { "dÃ©sirer": "to desire" }, { "empÃªcher": "to prevent" }, { "expliquer": "to explain" },
  { "garder": "to keep" }, { "hÃ©siter": "to hesitate" }, { "ignorer": "to not know, to ignore" }, { "intÃ©resser": "to interest" },
  { "manger": "to eat" }, { "marcher": "to walk, to work (machine)" }, { "obtenir": "to obtain" }, { "offrir": "to offer" },
  { "oublier": "to forget" }, { "payer": "to pay" }, { "pleurer": "to cry" }, { "poser": "to put down, to ask (a question)" },
  { "prÃ©fÃ©rer": "to prefer" }, { "prendre": "to take" }, { "prÃ©parer": "to prepare" }, { "quitter": "to leave (a place/person)" },
  { "raconter": "to tell (a story)" }, { "recevoir": "to receive" }, { "reconnaÃ®tre": "to recognize" }, { "rÃ©flÃ©chir": "to think, to reflect" },
  { "regretter": "to regret" }, { "remarquer": "to notice" }, { "rencontrer": "to meet (by chance)" }, { "rentrer": "to return (home)" },
  { "rÃ©pÃ©ter": "to repeat" }, { "rÃ©pondre": "to answer" }, { "rÃ©soudre": " to solve" }, { "rÃ©ussir": "to succeed" },
  { "revoir": "to see again" }, { "sauter": "to jump" }, { "sembler": "to seem" }, { "supporter": "to support, to bear" },
  { "tenter": "to tempt, to attempt" }, { "terminer": "to finish" }, { "tirer": "to pull, to shoot" }, { "tomber": "to fall" },
  { "tourner": "to turn" }, { "traverser": "to cross" }, { "utiliser": "to use" }, { "valoir": "to be worth" },
  { "vendre": "to sell" }, { "vivre": "to live" }, { "voler": "to fly, to steal" }, { "voter": "to vote" },
  { "acheter": "to buy" }, { "aider": "to help" }, { "ajouter": "to add" }, { "allumer": "to light, to turn on" },
  { "apporter": "to bring" }, { "apprendre": "to learn" }, { "arrÃªter": "to stop" }, { "asseoir": "to sit" },
  { "attacher": "to attach" }, { "battre": "to beat" }, { "blesser": "to injure" }, { "boire": "to drink" },
  { "cacher": "to hide" }, { "casser": "to break" }, { "cesser": "to cease" }, { "combattre": "to fight" },
  { "commander": "to order" }, { "comparer": "to compare" }, { "conduire": "to drive" }, { "confier": "to entrust" },
  { "construire": "to build" }, { "consulter": "to consult" }, { "contenter": "to satisfy" }, { "copier": "to copy" },
  { "correspondre": "to correspond" }, { "coucher": "to put to bed" }, { "couper": "to cut" }, { "courir": "to run" },
  { "coÃ»ter": "to cost" }, { "couvrir": "to cover" }, { "craindre": "to fear" }, { "crÃ©er": "to create" },
  { "crier": "to shout" }, { "danser": "to dance" }, { "dÃ©clarer": "to declare" }, { "dÃ©crire": "to describe" },
  { "dÃ©fendre": "to defend" }, { "demander": "to ask" }, { "dÃ©mÃ©nager": "to move (house)" }, { "dÃ©penser": "to spend (money)" },
  { "dÃ©tester": "to hate" }, { "devoir": "to owe, to have to" }, { "dÃ®ner": "to have dinner" }, { "diriger": "to direct, to manage" },
  { "discuter": "to discuss" }, { "disparaÃ®tre": "to disappear" }, { "distribuer": "to distribute" }, { "diviser": "to divide" },
  { "dormir": "to sleep" }, { "Ã©changer": "to exchange" }, { "Ã©chapper": "to escape" }, { "Ã©chouer": "to fail" },
  { "Ã©clairer": "to light up, to clarify" }, { "Ã©conomiser": "to save (money)" }, { "Ã©couter": "to listen" }, { "effacer": "to erase" },
  { "Ã©lever": "to raise, to bring up" }, { "embrasser": "to kiss" }, { "emmener": "to take (someone)" }, { "emprunter": "to borrow" },
  { "enlever": "to remove" }, { "ennuyer": "to bore, to bother" }, { "enseigner": "to teach" }, { "entraÃ®ner": "to train, to involve" },
  { "envelopper": "to wrap" }, { "envoyer": "to send" }, { "espÃ©rer": "to hope" }, { "essuyer": "to wipe" },
  { "Ã©tablir": "to establish" }, { "Ã©teindre": "to extinguish, to turn off" }, { "Ã©tendre": "to stretch, to spread" },
  { "Ã©tonner": "to astonish" }, { "Ã©tudier": "to study" }, { "Ã©viter": "to avoid" }, { "examiner": "to examine" },
  { "excuser": "to excuse" }, { "exister": "to exist" }, { "exploiter": "to exploit, to operate" }, { "exprimer": "to express" },
  { "fabriquer": "to manufacture" }, { "faciliter": "to facilitate" }, { "faiblir": "to weaken" }, { "fÃªter": "to celebrate" },
  { "fier": "to be proud (se fier)" }, { "fixer": "to fix, to set" }, { "fondre": "to melt" }, { "forcer": "to force" },
  { "frapper": "to hit, to strike" }, { "fumer": "to smoke" }, { "gÃ¢ter": "to spoil" }, { "glisser": "to slide" },
  { "goÃ»ter": "to taste" }, { "grandir": "to grow up" }, { "gratter": "to scratch" }, { "habiter": "to live (in a place)" },
  { "inclure": "to include" }, { "indiquer": "to indicate" }, { "informer": "to inform" }, { "inquiÃ©ter": "to worry" },
  { "inspirer": "to inspire" }, { "installer": "to install" }, { "introduire": "to introduce" }, { "inventer": "to invent" },
  { "inviter": "to invite" }, { "jeter": "to throw" }, { "joindre": "to join" }, { "jurer": "to swear" },
  { "justifier": "to justify" }, { "lancer": "to launch, to throw" }, { "laver": "to wash" }, { "lever": "to lift, to raise" },
  { "libÃ©rer": "to free, to release" }, { "lier": "to bind, to link" }, { "louer": "to rent, to praise" }, { "lutter": "to struggle, to fight" },
  { "manquer": "to miss, to lack" }, { "marier": "to marry" }, { "mÃ©cher": "to deserve" }, { "mÃ©langer": "to mix" },
  { "menacer": "to threaten" }, { "mentir": "to lie" }, { "mÃ©riter": "to deserve" }, { "mesurer": "to measure" },
  { "monter": "to go up, to climb" }, { "montrer": "to show" }, { "nager": "to swim" }, { "nÃ©gocier": "to negotiate" },
  { "noter": "to note" }, { "obÃ©ir": "to obey" }, { "obliger": "to oblige" }, { "observer": "to observe" },
  { "obtenir": "to obtain" }, { "occuper": "to occupy" }, { "offenser": "to offend" }, { "omettre": "to omit" },
  { "opÃ©rer": "to operate" }, { "ordonner": "to order (command)" }, { "organiser": "to organize" }, { "oser": "to dare" },
  { "Ã´te": "to remove" }, { "oublier": "to forget" }, { "pardonner": "to forgive" }, { "paraÃ®tre": "to appear" },
  { "parcourir": "to travel through, to skim" }, { "partager": "to share" }, { "participer": "to participate" },
  { "parvenir": "to reach, to manage" }, { "passer": "to pass" }, { "patiner": "to skate" }, { "pÃªcher": "to fish" },
  { "peindre": "to paint" }, { "pencher": "to lean" }, { "pÃ©nÃ©trer": "to penetrate" }, { "penser": "to think" },
  { "percer": "to pierce" }, { "perdre": "to lose" }, { "permettre": "to allow" }, { "persuader": "to persuade" },
  { "peser": "to weigh" }, { "placer": "to place" }, { "plaindre": "to pity" }, { "plaire": "to please" },
  { "pleurer": "to cry" }, { "plier": "to fold" }, { "plonger": "to dive" }, { "porter": "to carry, to wear" },
  { "poser": "to put down, to ask" }, { "possÃ©der": "to possess" }, { "pousser": "to push, to grow (plant)" },
  { "pratiquer": "to practice" }, { "prÃ©ciser": "to specify" }, { "prÃ©dire": "to predict" }, { "prÃ©fÃ©rer": "to prefer" },
  { "prendre": "to take" }, { "prÃ©parer": "to prepare" }, { "prÃ©senter": "to present" }, { "prÃ©tendre": "to claim" },
  { "prÃ©venir": "to warn, to prevent" }, { "prier": "to pray" }, { "priver": "to deprive" }, { "proclamer": "to proclaim" },
  { "produire": "to produce" }, { "progresser": "to progress" }, { "promener": "to walk (someone/an animal)" },
  { "promettre": "to promise" }, { "prononcer": "to pronounce" }, { "proposer": "to propose" }, { "protÃ©ger": "to protect" },
  { "prouver": "to prove" }, { "provoquer": "to provoke" }, { "publicr": "to publish" }, { "punir": "to punish" },
  { "quitter": "to leave" }, { "rassurer": "to reassure" }, { "rÃ©aliser": "to realize, to achieve" }, { "recevoir": "to receive" },
  { "recommander": "to recommend" }, { "reconnaÃ®tre": "to recognize" }, { "recueillir": "to collect, to gather" },
  { "rÃ©duire": "to reduce" }, { "rÃ©flÃ©chir": "to reflect, to think" }, { "refuser": "to refuse" }, { "regarder": "to look at" },
  { "rÃ©gler": "to regulate, to settle (bill)" }, { "regretter": "to regret" }, { "rejeter": "to reject" },
  { "rejoindre": "to rejoin, to meet up with" }, { "relier": "to connect" }, { "remarquer": "to notice" }, { "remercier": "to thank" },
  { "remettre": "to put back, to postpone" }, { "remplacer": "to replace" }, { "remplir": "to fill" }, { "rencontrer": "to meet" },
  { "rendre": "to give back" }, { "renoncer": "to give up" }, { "renseigner": "to inform" }, { "rentrer": "to return home" },
  { "renverser": "to knock over, to reverse" }, { "renvoyer": "to send back, to dismiss" }, { "rÃ©pandre": "to spread" },
  { "rÃ©parer": "to repair" }, { "repartir": "to leave again" }, { "rÃ©pÃ©ter": "to repeat" }, { "rÃ©pondre": "to answer" },
  { "reposer": "to rest, to put back" }, { "reprendre": "to take back, to resume" }, { "reprÃ©senter": "to represent" },
  { "rÃ©server": "to reserve" }, { "rÃ©sider": "to reside" }, { "rÃ©sister": "to resist" }, { "rÃ©soudre": "to solve" },
  { "ressembler": "to resemble" }, { "ressentir": "to feel (an emotion)" }, { "rester": "to stay" }, { "retarder": "to delay" },
  { "retenir": "to retain, to hold back" }, { "retirer": "to withdraw, to remove" }, { "retomber": "to fall again" },
  { "retourner": "to return, to turn over" }, { "retrouver": "to find again, to meet" }, { "rÃ©ussir": "to succeed" },
  { "rÃ©veiller": "to wake up" }, { "revenir": "to come back" }, { "revendiquer": "to claim" }, { "rÃªver": "to dream" },
  { "revoir": "to see again" }, { "rire": "to laugh" }, { "risquer": "to risk" }, { "rougir": "to blush, to turn red" },
  { "rouler": "to roll, to drive" }, { "sacrifier": "to sacrifice" }, { "saisir": "to seize, to grasp" }, { "saluer": "to greet" },
  { "satisfaire": "to satisfy" }, { "sauver": "to save" }, { "savoir": "to know" }, { "sÃ©cher": "to dry" },
  { "secouer": "to shake" }, { "sÃ©duire": "to seduce" }, { "sÃ©parer": "to separate" }, { "serrer": "to tighten, to shake (hands)" },
  { "servir": "to serve" }, { "signaler": "to signal, to report" }, { "signer": "to sign" }, { "signifier": "to mean" },
  { "simplifier": "to simplify" }, { "situer": "to situate, to locate" }, { "sonder": "to sound, to probe" }, { "songer": "to dream, to think" },
  { "sortir": "to go out" }, { "souffler": "to blow, to whisper" }, { "souffrir": "to suffer" }, { "soulever": "to lift, to raise" },
  { "soumettre": "to submit" }, { "soupÃ§onner": "to suspect" }, { "sourire": "to smile" }, { "soustraire": "to subtract" },
  { "soutenir": "to support" }, { "se souvenir": "to remember" }, { "souhaiter": "to wish" }, { "spÃ©cialiser": "to specialize" },
  { "stationner": "to park" }, { "stimuler": "to stimulate" }, { "subir": "to undergo" }, { "substituer": "to substitute" },
  { "sucer": "to suck" }, { "succÃ©der": "to succeed, to follow" }, { "suffire": "to suffice" }, { "suivre": "to follow" },
  { "supplier": "to beg" }, { "supporter": "to support, to bear" }, { "supposer": "to suppose" }, { "supprimer": "to suppress, to delete" },
  { "surmonter": "to overcome" }, { "surprendre": "to surprise" }, { "sursauter": "to startle" }, { "surveiller": "to watch over, to monitor" },
  { "survivre": "to survive" }, { "suspendre": "to suspend" }, { "tÃ¢cher": "to try, to endeavor" }, { "taire": "to be silent (se taire)" },
  { "tarder": "to delay, to be long" }, { "tÃ¢ter": "to feel, to test" }, { "tÃ©lÃ©phoner": "to telephone" },
  { "tÃ©moigner": "to testify, to show" }, { "tendre": "to stretch, to tend" }, { "tenir": "to hold" }, { "terminer": "to finish" },
  { "tirer": "to pull, to shoot" }, { "tisser": "to weave" }, { "tolÃ©rer": "to tolerate" }, { "tomber": "to fall" },
  { "tordre": "to twist" }, { "toucher": "to touch" }, { "tourner": "to turn" }, { "tousser": "to cough" },
  { "traduire": "to translate" }, { "trahir": "to betray" }, { "traÃ®ner": "to drag, to linger" }, { "traiter": "to treat, to process" },
  { "transformer": "to transform" }, { "transmettre": "to transmit" }, { "transporter": "to transport" }, { "travailler": "to work" },
  { "traverser": "to cross" }, { "trembler": "to tremble" }, { "tremper": "to soak" }, { "tricher": "to cheat" },
  { "triompher": "to triumph" }, { "tromper": "to deceive" }, { "troubler": "to disturb" }, { "trouver": "to find" },
  { "tuer": "to kill" }, { "unir": "to unite" }, { "user": "to use, to wear out" }, { "utiliser": "to use" },
  { "vaincre": "to conquer" }, { "valoir": "to be worth" }, { "varier": "to vary" }, { "vendre": "to sell" },
  { "venger": "to avenge" }, { "venir": "to come" }, { "verdir": "to turn green" }, { "vÃ©rifier": "to check, to verify" },
  { "verser": "to pour, to pay" }, { "vÃªtir": "to clothe" }, { "vider": "to empty" }, { "vieillir": "to grow old" },
  { "visiter": "to visit (a place)" }, { "vivre": "to live" }, { "voiler": "to veil" }, { "voir": "to see" },
  { "voler": "to fly, to steal" }, { "voter": "to vote" }, { "vouloir": "to want" }, { "voyager": "to travel" },
  { "vraiment": "truly" }, { "vrai": "true" }, { "vue": "sight, view" }
];

        const fullWordList = frenchWords1500.map(item => {
            const key = Object.keys(item)[0];
            return { fr: key, en: item[key] };
        });

        const grammarBank = [
          {
            id: 'g_gender_le',
            type: 'grammar',
            promptFr: 'Article + noun: ___ problÃ¨me (choose le/la)',
            acceptable: ['le'],
            topic: 'Gender'
          },
          {
            id: 'g_gender_la',
            type: 'grammar',
            promptFr: 'Article + noun: ___ maison (choose le/la)',
            acceptable: ['la'],
            topic: 'Gender'
          },
          {
            id: 'g_plural_s',
            type: 'grammar',
            promptFr: 'Make plural: "chat" ->',
            acceptable: ['chats'],
            topic: 'Pluralization'
          },
          {
            id: 'g_subj_pron',
            type: 'grammar',
            promptFr: 'Translate "We" ->',
            acceptable: ['nous'],
            topic: 'Pronouns'
          },
          {
            id: 'g_etre',
            type: 'grammar',
            promptFr: 'Conjugate: Je ___ (Ãªtre) ->',
            acceptable: ['suis'],
            topic: 'ÃŠtre (To be)'
          },
          {
            id: 'g_avoir',
            type: 'grammar',
            promptFr: 'Conjugate: J\'___ (avoir) ->',
            acceptable: ['ai'],
            topic: 'Avoir (To have)'
          },
          {
            id: 'g_pres_er',
            type: 'grammar',
            promptFr: 'Conjugate: parler (je, prÃ©sent) ->',
            acceptable: ['parle'],
            topic: 'Present Tense (-er)'
          },
          {
            id: 'g_negation',
            type: 'grammar',
            promptFr: 'Negate: "Je mange" -> "Je ___ mange ___"',
            acceptable: ['ne pas', 'ne...pas', 'ne pas'],
            topic: 'Negation'
          }
        ];

        // State
        let quizQueue = [];
        let currentCard = null;
        let correctCounts = {};
        let totalItems = 0;
        let itemsDone = 0;
        let isProcessing = false;
        
        // Session Data for Export
        let sessionNewWords = [];
        let sessionReviewWords = [];

        // Elements
        const setupScreen = document.getElementById('setupScreen');
        const quizScreen = document.getElementById('quizScreen');
        const progressInput = document.getElementById('progressInput');
        const questionWordEl = document.getElementById('questionWord');
        const answerInput = document.getElementById('answerInput');
        const statsDisplay = document.getElementById('statsDisplay');
        const progressBar = document.getElementById('progressBar');
        const langIndicator = document.getElementById('langIndicator');

        // Logic
        function startQuiz() {
            const learnedCount = parseInt(progressInput.value) || 0;
            
            // 1. Identify segments
            const startPrior = Math.max(0, learnedCount - 40);
            const priorWords = fullWordList.slice(startPrior, learnedCount);
            const newWords = fullWordList.slice(learnedCount, learnedCount + 20);

            let randomWords = [];
            if (startPrior > 0) {
                const pool = fullWordList.slice(0, startPrior);
                pool.sort(() => Math.random() - 0.5);
                randomWords = pool.slice(0, 40);
            }

            // Store for AI Prompt (Unique French words)
            sessionNewWords = newWords.map(w => w.fr);
            sessionReviewWords = [...new Set([...priorWords, ...randomWords].map(w => w.fr))];

            // 2. Build Base Array (Weighted)
            // "The 20 new words are copied twice (so there are three times as many of them)"
            const newWordsTripled = [];
            newWords.forEach(w => {
                newWordsTripled.push(w, w, w);
            });

            const baseSet = [
                ...priorWords,
                ...newWordsTripled,
                ...randomWords
            ];

            // 3. Replicate 10 times
            let finalArray = [];
            for (let i = 0; i < 10; i++) {
                finalArray = finalArray.concat(baseSet);
            }

            if (finalArray.length === 0) {
                alert("Please increase the number of learned words or check the word list.");
                return;
            }

            // 4. Shuffle Final Queue
            quizQueue = finalArray.sort(() => Math.random() - 0.5);

            // 4b. Mix in Grammar
            const segmentSize = Math.floor(quizQueue.length / (grammarBank.length || 1));
            
            grammarBank.forEach((gItem, index) => {
                const bucketIndex = (grammarBank.length - 1) - index;
                let pos = (bucketIndex * segmentSize) + Math.floor(Math.random() * segmentSize);
                pos = Math.max(0, Math.min(pos, quizQueue.length));
                quizQueue.splice(pos, 0, gItem);
            });

            // 5. Add Intro Phase (New Words x 2)
            const introWords = [];
            introWords.push(...newWords);
            introWords.push(...newWords);
            introWords.reverse(); // Reverse for popping logic

            quizQueue.push(...introWords);

            totalItems = quizQueue.length;
            itemsDone = 0;

            // Reset stats for new words
            newWords.forEach(w => {
                if (!correctCounts[w.fr]) correctCounts[w.fr] = 0;
            });

            setupScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            
            nextCard();
        }

        function nextCard() {
            if (quizQueue.length === 0) {
                alert("Quiz Complete! C'est magnifique!");
                location.reload();
                return;
            }

            isProcessing = false;
            const wordObj = quizQueue.pop();
            itemsDone++;
            updateProgress();

            if (wordObj.type === 'grammar') {
                currentCard = {
                    wordObj: wordObj,
                    mode: 'grammar',
                    question: wordObj.promptFr,
                    answer: wordObj.acceptable[0],
                    acceptable: wordObj.acceptable
                };
                questionWordEl.textContent = currentCard.question;
                langIndicator.textContent = `Grammar: ${wordObj.topic}`;
            } else {
                const mode = Math.random() < 0.5 ? 'toEN' : 'toFR';
                
                currentCard = {
                    wordObj: wordObj,
                    mode: mode,
                    question: mode === 'toEN' ? wordObj.fr : wordObj.en,
                    answer: mode === 'toEN' ? wordObj.en : wordObj.fr,
                    acceptable: [mode === 'toEN' ? wordObj.en : wordObj.fr]
                };

                questionWordEl.textContent = currentCard.question;
                langIndicator.textContent = mode === 'toEN' ? "French â†’ English" : "English â†’ French";
            }
            
            answerInput.value = "";
            answerInput.className = "";
            answerInput.focus();
            statsDisplay.textContent = "";
        }

        function checkAnswer() {
            if (isProcessing) return;

            const userVal = answerInput.value.trim().toLowerCase();
            // Check if any acceptable answer matches
            const isCorrect = currentCard.acceptable.some(a => a.toLowerCase() === userVal);
            
            isProcessing = true;

            if (isCorrect) {
                // Correct
                answerInput.classList.add('input-correct');
                
                if (currentCard.wordObj.fr && correctCounts.hasOwnProperty(currentCard.wordObj.fr)) {
                    correctCounts[currentCard.wordObj.fr]++;
                    statsDisplay.textContent = `Correct! You've mastered "${currentCard.wordObj.fr}" ${correctCounts[currentCard.wordObj.fr]} times.`;
                } else {
                    statsDisplay.textContent = "Correct!";
                }

                setTimeout(() => {
                    nextCard();
                }, 1000);

            } else {
                // Incorrect
                answerInput.classList.add('input-incorrect');
                statsDisplay.style.color = "var(--error)";
                statsDisplay.textContent = `Incorrect. The answer was "${currentCard.answer}".`;

                setTimeout(() => {
                    statsDisplay.style.color = ""; // Reset color
                    nextCard();
                }, 2000);
            }
        }

        function updateProgress() {
            const pct = (itemsDone / totalItems) * 100;
            progressBar.style.width = pct + "%";
        }

        function copyAiPrompt() {
            if (sessionNewWords.length === 0 && sessionReviewWords.length === 0) {
                alert("Start the quiz first to generate a prompt.");
                return;
            }

            const promptText = `I would like you to help me practice French by having a conversation with me using only these French words. Please try to use the newly added words (listed first) more frequently than the rest in order to help me remember them.

NEW WORDS (Prioritize these):
${sessionNewWords.join(', ')}

REVIEW WORDS:
${sessionReviewWords.join(', ')}`;

            navigator.clipboard.writeText(promptText).then(() => {
                const btn = document.querySelector('.btn-outline');
                const originalText = btn.textContent;
                btn.textContent = "âœ… Copied to Clipboard!";
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
                alert("Failed to copy to clipboard. Please allow clipboard permissions.");
            });
        }

        // Event Listeners
        answerInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

    </script>
</body>
</html>